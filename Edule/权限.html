<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<style>
    *{
        padding: 0;
        margin: 0;
    }
    #myTable {
        border-collapse: collapse;
        /* 合并边框 */
    }

    #myTable th,
    #myTable td {
        padding: 8px;
        /* 内边距 */
        text-align: left;
        /* 左对齐 */
        white-space: nowrap;
        border: 1px solid gray;
    }
    .modal-overlay {
        display: none; /* 默认隐藏 */
        position: fixed;
        top: 0; left: 0; right: 0; bottom: 0;
        background: rgba(0,0,0,0);
        z-index: 999;
        justify-content: center;
        align-items: center;
      }

      /* 弹窗内容 */
      .modal-content {
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        max-width: 300px;
        display:flex;
        flex-wrap:wrap;
        justify-content:center;
      }
      .modal-contents {
        background: #fff;
        padding: 20px;
        border-radius: 8px;
        max-width: 100vw;
        max-height: 100vw;
        display:flex;
        flex-wrap:wrap;
        justify-content:center;
      }
      .modal-content input {
        display: block;
        width: 100%;
        margin-bottom: 10px;
        padding: 5px;
      }
      .modal-content select {
        display: block;
        width: 100%;
        margin-bottom: 10px;
        padding: 5px;
      }

      .modal-content button {
        width: 70%;
        padding: 6px;
      }
</style>
<body style="width: 100vw;height: 100vh;overflow: auto;">
    <table id="myTable" style="margin-left: 39%;">
        <thead>
            <tr>
                <th>序号</th>
                <th>账号</th>
                <th>权限</th>
                <th>操作1</th>
                <th>操作2</th>
            </tr>
        </thead>
        <tbody id="tbody">

        </tbody>
    </table>
    <div class="modal-overlay" id="modalOverlay">
        <div class="modal-content" id="modalContent">
            <input type="text" id='姓名' readonly>  
            <select id="权限">
                <option value="">选择权限</option>
                <option value="admin">超级管理员</option>
                <option value="只读">只读</option>
            </select>
            <button onclick="submitForm()">Submit</button>
        </div>
    </div>
    <div class="modal-overlay" id="modalOverlays">
        <div class="modal-content" id="modalContent">
            <input type="text" placeholder="姓名" id='姓名_del'>
            <button onclick="submitForms()">Del</button>
        </div>
    </div>
    <script src="assets/js/vendor/jquery-3.5.1.min.js"></script>
    <script>
        
        document.getElementById('modalOverlay').addEventListener('click', function (e) {
            if (e.target === this) {
                this.style.display = 'none';
            }
        });
        document.getElementById('modalOverlays').addEventListener('click', function (e) {
            if (e.target === this) {
                this.style.display = 'none';
            }
        });
        function submitForm() {
            $.get("https://srjfaw743ud0.xiaomiqiu.com/修改",{user:$("#姓名").val(),权限:$("#权限").val()}, function (data) {
                初始()
                document.getElementById('modalOverlay').style.display = 'none';
            })
        }
        function submitForms() {
            $.get("https://srjfaw743ud0.xiaomiqiu.com/删除",{user:$("#姓名_del").val()}, function (data) {
                初始()
                document.getElementById('modalOverlays').style.display = 'none';
            })
        }
        function 初始(){
            $.get("https://srjfaw743ud0.xiaomiqiu.com/权限", function (data) {
                var asd=''
                for (let index = 0; index < data.length; index++) {
                    const element = data[index];
                    asd+=`  <tr>
                        <td>${index+1}</td>
                        <td>${element[0]}</td>
                        <td>${element[1]}</td>
                        <td style="color: blue;cursor: pointer;" onclick="xg('${element[0]}')">修改</td>
                        <td style="color: red;cursor: pointer;" onclick="del('${element[0]}')">删除</td>
                    </tr>`
                }
                $("#tbody").html(asd)
            },'json')
        }
        初始()
        function xg(a,b){
            document.getElementById('modalOverlay').style.display = 'flex';
                $("#姓名").val(a)
        }
        function del(a){
            document.getElementById('modalOverlays').style.display = 'flex';
                $("#姓名_del").val(a)
        }
    </script>
</body>
</html>